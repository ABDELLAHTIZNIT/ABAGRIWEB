<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>AB AGRIWEB</title>
<style>
:root{--bg:#0f172a;--panel:#0b1220;--text:#e2e8f0;--accent:#22c55e;--border:#243046}
*{box-sizing:border-box}
body{margin:0;font-family:system-ui,-apple-system,Segoe UI,Roboto,Arial,sans-serif;background:linear-gradient(180deg,var(--bg),#1e293b);color:var(--text);min-height:100vh;display:grid;place-items:center;padding:20px;transition:background .2s ease}
.card{width:min(420px,92vw);background:#0b1220cc;border:1px solid #1f2937;border-radius:16px;padding:22px;box-shadow:0 10px 24px rgba(0,0,0,.35)}
h1{margin:0 0 12px;color:var(--accent);text-align:center}
.banner{margin:-4px -4px 14px -4px}
.banner img{width:100%;border-radius:12px;border:1px solid #1f2937}
label{display:block;margin:10px 0 6px;color:#cbd5e1}
.input{width:100%;padding:12px;border-radius:10px;border:1px solid #334155;background:#091227;color:#e2e8f0}
.field{position:relative}
.eye{position:absolute;right:10px;top:50%;transform:translateY(-50%);cursor:pointer}
.btn{width:100%;margin-top:12px;padding:12px;border-radius:10px;border:1px solid #22c55e;background:#22c55e;color:#0b1220;font-weight:700;cursor:pointer;text-align:center;display:block}
a{display:block;text-align:center;margin-top:10px;color:#93c5fd;text-decoration:none}
.hidden{display:none!important}
</style>
</head>
<body>
  <div class="card">
    <!-- ÿ¥ÿπÿßÿ± ÿßŸÑÿ™ÿ∑ÿ®ŸäŸÇ ŸÖŸÜ ÿßŸÑÿ•ÿπÿØÿßÿØÿßÿ™ -->
    <div id="loginLogoWrap" class="banner hidden"><img id="loginLogoImg" alt=""></div>
    <!-- ÿ®ÿßŸÜÿ± ÿßÿÆÿ™Ÿäÿßÿ±Ÿä ŸÅŸàŸÇ ÿßŸÑÿ≠ŸÇŸàŸÑ -->
    <div class="banner hidden" id="loginBanner"><img id="loginBannerImg" alt=""></div>
    <!-- ÿßÿ≥ŸÖ ÿßÿ≠ÿ™Ÿäÿßÿ∑Ÿä ÿ•ŸÜ ŸÑŸÖ ŸäŸàÿ¨ÿØ ÿ¥ÿπÿßÿ± -->
    <h1 id="appTitle" class="hidden">AB AGRIWEB</h1>

    <label>Username</label>
    <input id="u" class="input" placeholder="Enter your username"/>

    <label>Password</label>
    <div class="field">
      <input id="p" type="password" class="input" placeholder="Enter your password"/>
      <span class="eye" onclick="togglePass()">üëÅÔ∏è</span>
    </div>

    <a href="main.html" class="btn" id="loginBtn">Login</a>
    <a href="#">Forgot password?</a>
  </div>

<script>
const LS_APP='ab_appcfg', LS_IMG='ab_appimg';
function loadCfg(){try{return JSON.parse(localStorage.getItem(LS_APP)||'{}')}catch{return{}}}
function loadImgs(){try{return JSON.parse(localStorage.getItem(LS_IMG)||'{}')}catch{return{}}}

(function init(){
  const cfg=loadCfg();
  if(cfg.appTitle){ document.title=cfg.appTitle; }

  const imgs=loadImgs();

  // ÿ¥ÿπÿßÿ± ÿßŸÑÿ™ÿ∑ÿ®ŸäŸÇ (PNG/GIF) ÿ£Ÿà fallback ŸÑŸÑÿßÿ≥ŸÖ
  if( (imgs.logo && /^data:image\/(png|gif);/i.test(imgs.logo)) ||
      (typeof imgs.logo==='string' && /\.(png|gif)(\?|#|$)/i.test(imgs.logo)) ){
    const wrap=document.getElementById('loginLogoWrap');
    const img=document.getElementById('loginLogoImg');
    img.src=imgs.logo; wrap.classList.remove('hidden');
  } else {
    document.getElementById('appTitle').classList.remove('hidden');
  }

  // ÿ®ÿßŸÜÿ± ÿßŸÑÿØÿÆŸàŸÑ (PNG/GIF)
  if( (imgs.login && /^data:image\/(png|gif);/i.test(imgs.login)) ||
      (typeof imgs.login==='string' && /\.(png|gif)(\?|#|$)/i.test(imgs.login)) ){
    const wrap=document.getElementById('loginBanner');
    const img=document.getElementById('loginBannerImg');
    img.src=imgs.login; wrap.classList.remove('hidden');
  }

  // ÿÆŸÑŸÅŸäÿ© ŸÉÿßŸÖŸÑÿ© (PNG/GIF)
  if( (imgs.loginBg && /^data:image\/(png|gif);/i.test(imgs.loginBg)) ||
      (typeof imgs.loginBg==='string' && /\.(png|gif)(\?|#|$)/i.test(imgs.loginBg)) ){
    document.body.style.backgroundImage=`url('${imgs.loginBg}')`;
    document.body.style.backgroundSize='cover';
    document.body.style.backgroundPosition='center';
    document.body.style.backgroundRepeat='no-repeat';
  }
})();

function togglePass(){ const i=document.getElementById('p'); i.type=i.type==='password'?'text':'password'; }
function login(){ const url=new URL('main.html',window.location.href).toString(); window.location.href=url; }

// ÿØÿπŸÖ ŸÅŸä ÿ≠ÿßŸÑ ÿ•ÿ∂ÿßŸÅÿ© ÿ™ŸÖŸÜÿπ onclick
document.addEventListener('DOMContentLoaded',()=>{
  const btn=document.getElementById('loginBtn');
  if(btn) btn.addEventListener('click',(e)=>{ if(!btn.getAttribute('href')){ e.preventDefault(); login(); } });
});
</script>
</body>
</html>
