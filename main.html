<!doctype html>
<html lang="fr">
<head>
<meta charset="utf-8"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>AB AGRIWEB â€” Dashboard</title>
<style>
  :root{
    --bg:#0f2135; --panel:#0f1b2d; --panel2:#0e1a2a;
    --text:#e6f6e6; --muted:#9fb3c8; --accent:#7CFC00; --border:#243248;
  }
  *{box-sizing:border-box}
  body{margin:0; background:var(--bg); color:var(--text); font:15px/1.4 system-ui,-apple-system,Segoe UI,Roboto,Helvetica,Arial; overflow-x:hidden}

  /* Top bar */
  .topbar{
    height:56px; display:flex; align-items:center; justify-content:space-between;
    padding:0 12px 0 10px; border-bottom:1px solid var(--border);
    background:linear-gradient(180deg,#0e1b2c,#0c1726);
    position:sticky; top:0; z-index:60;
  }
  .hamb{font-size:22px; cursor:pointer; width:36px; height:36px; display:grid; place-items:center; border-radius:999px}
  .hamb:hover{background:rgba(255,255,255,.06)}
  .title{font-weight:800; letter-spacing:.6px}
  .rightslot{display:flex; align-items:center; gap:10px}
  .rightslot img{height:26px; width:auto; object-fit:contain}

  .wrap{padding:14px}
  .card{background:var(--panel); border:1px solid var(--border); border-radius:16px; padding:14px; margin-bottom:14px}

  /* Accordion */
  .acc{border-radius:16px; overflow:hidden; border:1px solid var(--border)}
  .acc-sec + .acc-sec{border-top:1px solid var(--border)}
  .acc-hd{padding:14px; background:#0f1b2d; cursor:pointer; display:flex; align-items:center; justify-content:space-between}
  .acc-bd{display:none; padding:14px; background:#0e1a2a}
  .acc-sec.open .acc-bd{display:block}

  .row{display:grid; grid-template-columns:1fr; gap:10px}
  label{font-size:13px; color:var(--muted)}
  .inp{display:flex; gap:8px; align-items:center; background:#0e1a2a; border:1px solid var(--border); padding:10px 12px; border-radius:12px}
  .inp input[type="text"]{flex:1; background:transparent; border:0; outline:0; color:var(--text)}
  .btn{background:var(--accent); color:#07150e; font-weight:700; border:0; padding:10px 12px; border-radius:12px; cursor:pointer}

  .muted{color:var(--muted); font-size:12px}
  .note{font-size:12px; color:#cde7ff}
  .hr{height:1px;background:var(--border); margin:10px 0}

  /* === Sidebar (drawer) === */
  .overlay{
    position:fixed; inset:0; background:rgba(0,0,0,.45);
    opacity:0; visibility:hidden; transition:.2s ease; z-index:55;
  }
  .overlay.show{opacity:1; visibility:visible}
  .sidebar{
    position:fixed; inset:0 auto 0 0; width:268px; max-width:86vw;
    background:linear-gradient(180deg,#0b1524,#0a1220);
    border-right:1px solid var(--border);
    transform:translateX(-100%); transition:transform .25s ease; z-index:60;
    display:flex; flex-direction:column;
  }
  .sidebar.open{transform:translateX(0)}
  .sb-top{
    display:flex; align-items:center; justify-content:space-between;
    padding:12px; border-bottom:1px solid var(--border);
  }
  .sb-close{font-size:20px; width:34px; height:34px; display:grid; place-items:center; border-radius:10px; cursor:pointer}
  .sb-close:hover{background:rgba(255,255,255,.06)}
  .sb-nav{padding:8px}
  .sb-item{
    display:flex; align-items:center; gap:10px; padding:12px 10px; border-radius:12px;
    color:var(--text); text-decoration:none; border:1px solid transparent;
  }
  .sb-item:hover{background:var(--panel2); border-color:var(--border)}
  .sb-item.active{background:#1b2a41; border-color:var(--border)}
  .sb-foot{margin-top:auto; padding:8px}
  .logout{background:var(--accent); color:#08140e; text-align:center; padding:10px; border-radius:12px; cursor:pointer; font-weight:700}
</style>
</head>
<body>

  <!-- Topbar -->
  <div class="topbar">
    <div class="left">
      <span class="hamb" id="openMenu" aria-label="Open menu">â˜°</span>
    </div>
    <div class="title">AB AGRIWEB</div>
    <div class="rightslot">
      <img id="topbarLogo" alt="">
    </div>
  </div>

  <!-- Overlay + Sidebar -->
  <div id="overlay" class="overlay" tabindex="-1"></div>

  <nav id="sidebar" class="sidebar" aria-hidden="true">
    <div class="sb-top">
      <strong>Menu</strong>
      <span id="closeMenu" class="sb-close" aria-label="Close menu">âœ•</span>
    </div>
    <div class="sb-nav">
      <a class="sb-item" href="#" onclick="alert('Irrigation (Ù‚Ø±ÙŠØ¨Ø§Ù‹)')">ğŸŒ¿ Irrigation</a>
      <a class="sb-item" href="#" onclick="alert('Traitement (Ù‚Ø±ÙŠØ¨Ø§Ù‹)')">ğŸ’§ Traitement</a>
      <a class="sb-item active" href="#branding">âš™ï¸ ParamÃ¨tres</a>
    </div>
    <div class="sb-foot">
      <div class="logout" onclick="doLogout()">Logout</div>
    </div>
  </nav>

  <div class="wrap">
    <!-- Branding ÙÙ‚Ø· ÙƒÙ…Ø§ Ø·Ù„Ø¨Øª -->
    <div class="acc" id="branding">
      <div class="acc-sec open" id="accBrand">
        <div class="acc-hd" onclick="toggleAcc(this)">Branding (ØµÙˆØ± Ø§Ù„ÙˆØ§Ø¬Ù‡Ø©)</div>
        <div class="acc-bd">
          <div class="row">
            <!-- Ø®Ù„ÙÙŠØ© Ø´Ø§Ø´Ø© ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„ -->
            <div class="card">
              <h3>Login Background</h3>
              <div class="inp">
                <input id="brand_login_bg_url" type="text" placeholder="assets/image/login-bg.jpg (Ø£Ùˆ Ø§Ù„ØµÙ‚ Ø±Ø§Ø¨Ø· ØµÙˆØ±Ø©)">
                <button class="btn" type="button" onclick="saveBrandUrl('brand.loginBg','brand_login_bg_url')">Save URL</button>
              </div>
              <div class="hr"></div>
              <label class="muted">Ø£Ùˆ Ø­Ù…Ù‘Ù„ ØµÙˆØ±Ø© (png/jpg/gif)</label>
              <input id="brand_login_bg_file" type="file" accept=".png,.jpg,.jpeg,.gif" onchange="saveBrandFile('brand.loginBg', this)">
              <div class="muted">Ø§Ù„Ø­Ù‚ÙˆÙ„ ÙˆØ²Ø± Ø§Ù„Ø¯Ø®ÙˆÙ„ Ø³ÙŠØ¸Ù‡Ø±ÙˆÙ† ÙÙˆÙ‚ Ù‡Ø°Ù‡ Ø§Ù„ØµÙˆØ±Ø© Ù…Ø¨Ø§Ø´Ø±Ø©.</div>
            </div>

            <!-- Ù‚Ø§Ù„Ø¨ ØµØºÙŠØ± Ø´ÙØ§Ù ÙÙˆÙ‚ Ø§Ù„Ø­Ù‚ÙˆÙ„ -->
            <div class="card">
              <h3>Login Badge (Ù‚Ø§Ù„Ø¨ ØµØºÙŠØ± Ø´ÙØ§Ù)</h3>
              <div class="inp">
                <input id="brand_login_badge_url" type="text" placeholder="assets/image/login-badge.png">
                <button class="btn" type="button" onclick="saveBrandUrl('brand.loginBadge','brand_login_badge_url')">Save URL</button>
              </div>
              <div class="hr"></div>
              <label class="muted">Ø£Ùˆ Ø­Ù…Ù‘Ù„ ØµÙˆØ±Ø© (png/gif Ø¨Ø®Ù„ÙÙŠØ© Ø´ÙØ§ÙØ©)</label>
              <input id="brand_login_badge_file" type="file" accept=".png,.gif" onchange="saveBrandFile('brand.loginBadge', this)">
              <div class="muted">ØªØ¸Ù‡Ø± Ø£Ø¹Ù„Ù‰ Ø§Ù„Ø­Ù‚ÙˆÙ„ ÙÙŠ ØµÙØ­Ø© ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„.</div>
            </div>

            <!-- Ø´Ø¹Ø§Ø± Ø§Ù„Ø´Ø±ÙŠØ· Ø§Ù„Ø¹Ù„ÙˆÙŠ ÙŠÙ…ÙŠÙ† Ø§Ù„Ù‡Ø§Ù…Ø¨Ø±ØºØ± -->
            <div class="card">
              <h3>Topbar Logo (ÙŠÙ…ÙŠÙ† â˜°)</h3>
              <div class="inp">
                <input id="brand_topbar_logo_url" type="text" placeholder="assets/image/topbar-logo.png">
                <button class="btn" type="button" onclick="saveBrandUrl('brand.topbarLogo','brand_topbar_logo_url')">Save URL</button>
              </div>
              <div class="hr"></div>
              <label class="muted">Ø£Ùˆ Ø­Ù…Ù‘Ù„ ØµÙˆØ±Ø© (png/jpg/gif)</label>
              <input id="brand_topbar_logo_file" type="file" accept=".png,.jpg,.jpeg,.gif" onchange="saveBrandFile('brand.topbarLogo', this)">
            </div>

            <div class="note">Ù…Ù„Ø§Ø­Ø¸Ø©: ÙŠÙ…ÙƒÙ†Ùƒ Ø£ÙŠØ¶Ø§Ù‹ Ø±ÙØ¹ Ø§Ù„ØµÙˆØ± Ø¯Ø§Ø®Ù„ <code>assets/image/</code> ÙˆØ§Ø³ØªØ¹Ù…Ø§Ù„ Ø§Ù„Ù…Ø³Ø§Ø± Ø§Ù„Ù†Ø³Ø¨ÙŠ Ù…Ø¨Ø§Ø´Ø±Ø©.</div>
          </div>
        </div>
      </div>
    </div>

    <div class="card"><div class="muted">Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª Ø¥Ø¶Ø§ÙÙŠØ© Ø³ØªØ¶Ø§Ù Ù„Ø§Ø­Ù‚Ø§Ù‹â€¦</div></div>
  </div>

<script>
  /* ===== Accordion ===== */
  function toggleAcc(hd){ hd.parentElement.classList.toggle('open'); }

  /* ===== Sidebar open/close ===== */
  const sidebar = document.getElementById('sidebar');
  const overlay = document.getElementById('overlay');
  const openBtn  = document.getElementById('openMenu');
  const closeBtn = document.getElementById('closeMenu');

  function openSidebar(){
    sidebar.classList.add('open');
    overlay.classList.add('show');
    sidebar.setAttribute('aria-hidden','false');
  }
  function closeSidebar(){
    sidebar.classList.remove('open');
    overlay.classList.remove('show');
    sidebar.setAttribute('aria-hidden','true');
  }
  openBtn.addEventListener('click', openSidebar);
  closeBtn.addEventListener('click', closeSidebar);
  overlay.addEventListener('click', closeSidebar);
  document.addEventListener('keydown', (e)=>{ if(e.key==='Escape') closeSidebar(); });

  /* ===== Branding save/apply ===== */
  function saveBrandUrl(key, inputId){
    const val = document.getElementById(inputId).value.trim();
    if(!val){ alert('Ø¶Ø¹ Ù…Ø³Ø§Ø± Ø§Ù„ØµÙˆØ±Ø© Ø£Ùˆ Ø±Ø§Ø¨Ø·Ù‡Ø§'); return; }
    localStorage.setItem(key, val);
    applyTopbarLogo();
    alert('Saved âœ”');
  }
  function saveBrandFile(key, input){
    const file = input.files && input.files[0];
    if(!file) return;
    const reader = new FileReader();
    reader.onload = () => { localStorage.setItem(key, reader.result); applyTopbarLogo(); alert('Saved âœ”'); };
    reader.readAsDataURL(file);
  }
  function applyTopbarLogo(){
    const src = localStorage.getItem('brand.topbarLogo') || 'assets/image/topbar-logo.png';
    document.getElementById('topbarLogo').src = src;
  }
  function hydrateBrandInputs(){
    [['brand.loginBg','brand_login_bg_url'],
     ['brand.loginBadge','brand_login_badge_url'],
     ['brand.topbarLogo','brand_topbar_logo_url']].forEach(([k,id])=>{
        const v = localStorage.getItem(k); if(v) document.getElementById(id).value = v;
     });
  }
  function doLogout(){ location.href='index.html'; }

  applyTopbarLogo();
  hydrateBrandInputs();
  // Ø³Ù…Ø§Ø­ ØªØ¬Ø§ÙˆØ² Ø§Ù„Ø¯Ø®ÙˆÙ„ Ù…Ø¤Ù‚ØªØ§Ù‹ Ø£Ø«Ù†Ø§Ø¡ Ø§Ù„ØªØ·ÙˆÙŠØ±
  if(!localStorage.getItem('security.bypass')) localStorage.setItem('security.bypass','1');
</script>
</body>
</html>
